<!DOCTYPE html>
<html g_init="6962" lang="ru">
<head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<script async="true" src="../js/context.js" type="text/javascript"></script>
	<meta charset=windows - 1251>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="../css/bootstrap.css">
	<link rel="stylesheet" href="../css/font-awesome.css">
	<!-- Bootstrap -->
	<link href="../css/bootstrap.min.css" rel="stylesheet">
	<link href="../css/font-awesome.min.css" rel="stylesheet">
	<link href="../css/main.css" rel="stylesheet">
	<link href="../css/folding.css" rel="stylesheet">
	 
	<script src="../js/mna.js"></script>
	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<!-- Include all compiled plugins (below), or include individual files as needed -->
	<script src="../js/bootstrap.min.js"></script>
	<style type="text/css" title="currentStyle" media="screen">
		@import "/style/style.css";
		@import "/style/personal.css";
	</style>
	<link rel="stylesheet" href="../css/standard.css">
	<style type="text/css" media="all">
		#request_status { width:900px; }
		.modal-body {  max-height: 800px;}
		.form_calc { display:table; min-width:657px; }
		#comments div.form-actions:after, form.form_full div.fieldset div.form-actions:after { clear:none; }
		div.hmain { width: 728px; padding:10px; margin:0; }
		div.ads-inline{ width:728px; }
		li.item { padding-left:20px; };
		@media (min-width:980px) { 
		div.hmain { width: 728px; margin-left:170px; padding:20px; margin-right:0;}
		div.ads-inline{ width:728px }
		}
		@media (min-width: 1240px) { 
		div.hmain  { width: 860px; padding:20px; margin-left:auto; margin-right:auto;}
		div.socialbuttonsribbon { padding-left:20px; }
		div.ads-inline{ width:728px;margin:0 auto 0 auto; }
		}
 
		@media (min-width: 1400px) { 
		div.hmain  { width: 960px; padding:20px; margin-left:auto; margin-right:auto;}
		div.socialbuttonsribbon { padding-left:30px; }
		}
		div.calc-embed {
		background-color:#777=;
		padding: 3px 28px 3px 3px;
		width:697px;
		margin: 3px auto 12px auto;
		}
		div.not-suitable {
		float:right;
		max-width:220px;
		margin-top:20px;
		text-align:center;
		padding:4px 15px 15px 15px;
		}
		table.pm img { padding:10px; }
		table.indevattrs { margin-bottom:0 }
		div.collect { padding-right:14px; }
		div.amount_form { padding-right:-14px; padding-left:-14px; margin-left:-14px; margin-right:-14px; background-color:#f5deb3; }
		div.amount_form > div, div.transfer_form >div {
		font-size:120%; width:300px; padding:10px; margin-left:auto; margin-right:auto;
		}
		div.collect h4 { padding:10px; }

		.bs-callout {
			padding: 20px;
			margin: 20px 0;
			border: 1px solid #eee;
			border-left-width: 5px;
			border-radius: 3px;
		}
		.bs-callout-info h3 {
			line-height:30px;
			color: #1b809e;
		}
		.bs-callout-info {
			border-left-color: #1b809e;
		}
		textarea{max-width: 70%;}
	</style>
	<script type="text/javascript" src="../js/jquery.js"></script>
	<script type="text/javascript">
	(function() {
		var useSSL = 'https:' == document.location.protocol;
		var src = (useSSL ? 'https:' : 'http:') +
		'//www.googletagservices.com/tag/js/gpt.js';
		document.write('<scr' + 'ipt src="' + src + '"></scr' + 'ipt>');
	})();
	</script>

	<script type="text/javascript">if (googletag) {googletag.defineSlot('/13440450/v2.ru.C.A.top', [728, 90], 'div-gpt-ad-1447585380-1').addService(googletag.pubads());
		googletag.defineSlot('/13440450/v2.ru.C.A.bottom', [728, 90], 'div-gpt-ad-1447585380-2').addService(googletag.pubads());
		googletag.pubads().enableSyncRendering();
		googletag.pubads().enableSingleRequest();
		googletag.enableServices();}
	</script>	
	
	<script type="text/javascript" src="../js/pl.js"></script>
	<script type="text/javascript" src="../js/require.js"></script>
	<script type="text/javascript">requirejs.config({ paths: { 'jstat': '//cdn.jsdelivr.net/jstat/1.4.7/jstat.min','d3': 'http://d3js.org/d3.v3.min'},
		shim: {jstat: {	exports: ['j$', 'jStat'],init: function () { return { j$: j$,jStat: jStat };}}}});
	</script>	
</head>

<body id="ui_viewer" class="viewer">
	<header id="header" role="banner">
		<div class="container">
			<div id="navbar" class="navbar navbar-default">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="../index.html"><img src="../images/spu.png"></a>
				</div>
				<div class="collapse navbar-collapse">
					<ul class="nav navbar-nav">
						<li class="active"><a href="../index.html"><i class="icon-home"></i></a></li>
						<li><a href="#calculations">Calculations</a></li>
						<li><a href="#about">About</a></li>
					</ul>
				</div>
            </div>
        </div>
	</header>	
	<section id="main-slider-calc"></section>
		<div class="container">
			<div class="box first">
				<div class="center">
					<h2>Matrix Operations</h2>
					<p class="lead"></p>
				</div>
	<div class="outer">
		<div class="inner">
			<div class="inner2">
				<div class="hall">
					<div class="hmain">
						<script type="text/javascript">
							var timeSpanFormatter = new FormatterTimeSpan();
							$(document).ready(function() {
							var dVal = $('span.nav-created').text();
							$('span.nav-created').text(timeSpanFormatter.Format( dVal));	
							});
						</script>
					<div><script type="text/javascript">
					function Dialogv54b60eb9da33d() {this.GetElement = function () { return document.getElementById( "dialogv54b60eb9da33d" ); };this.GetEventHandlerName = function () { return "dialoghandlerv54b60eb9da33d"; };this.matrixfield= new DialogInput("matrixfield", this, null,new ElementAccessorDefault());this.messages= new DialogInput("messages", this, null,new ElementAccessorResource());this.precisionmeter= new DialogInput("precisionmeter", this, null,new ElementAccessorPrecision());this._line= new DialogInput("_line", this, null,new ElementAccessorDefault());this.outputs0= new DialogInput("outputs0", this, null,new ElementAccessorDefault());this.validation= new DialogInput("validation", this, null,new ElementAccessorOutput());this.det= new DialogInput("det", this, null,new ElementAccessorOutput());this.Show = function () { ShowDialog("dialogv54b60eb9da33d"); };this.Hide = function () { HideDialog("dialogv54b60eb9da33d"); };this.Busy = function () { SetDialogBusy("dialogv54b60eb9da33d"); };this.Free = function () { SetDialogFree("dialogv54b60eb9da33d"); };this.SetValues = function ( values ) {for( var inputId in values ) {if ( this[inputId] ) { this[inputId].SetValue( values[inputId] ); }}};this.Clear = function ( ) {this.matrixfield.ResetValue();this.messages.ResetValue();this.precisionmeter.ResetValue();this._line.ResetValue();this.validation.ResetValue();this.det.ResetValue();};this.SetDefaultValues = function () {this.matrixfield.SetValue("-1 2  5\n3 4  6\n-8 2 12");this.messages.SetValue("OK");this.precisionmeter.SetValue("2");this._line.SetValue("<div class=\"form-actions\"><a id=\"dialogv54b60eb9da33d_calculate\" href=\"#\" onclick=\"dialoghandlerv54b60eb9da33d.recalculate(500); return BSPreventDefaultAction(event);\" class=\"btn btn-calc pull-right\"><i id=\"dialogv54b60eb9da33d_timerplace\" class=\"fa fa-spinner fa-spin\"></i> <span id=\"dialogv54b60eb9da33d_button_text\">Рассчитать</span></a></div>");this.validation.SetValue("");this.det.SetValue("");};this.GetValues = function () {var retval = {};retval["matrixfield"]=this.matrixfield.GetValue();retval["messages"]=this.messages.GetValue();retval["precisionmeter"]=this.precisionmeter.GetValue();retval["_line"]=this._line.GetValue();retval["validation"]=this.validation.GetValue();retval["det"]=this.det.GetValue();return retval;};this.ShowError = function ( obj, text ) {showError( obj, text, "error_box_v54b60eb9da33d");};this.Validate = function ( ) {if (!this.matrixfield.ValidateCurrent() ) { return false; }if (!this.messages.ValidateCurrent() ) { return false; }if (!this.precisionmeter.ValidateCurrent() ) { return false; }if (!this._line.ValidateCurrent() ) { return false; }if (!this.validation.ValidateCurrent() ) { return false; }if (!this.det.ValidateCurrent() ) { return false; }return true;};};
					</script></div>
<!-------Determinant of the matrix--------------------->
<div class="form_calc" id="dialogv54b60eb9da33d">
	<div class="fieldset ">
		<div class="control-group">
		<legend id="dialogv54b60eb9da33d_legend">Determinant of the matrix</legend>
		<label class="control-label textarea" for="dialogv54b60eb9da33d_matrixfield">Initial matrix:</label>
			<div class="controls"><textarea id="dialogv54b60eb9da33d_matrixfield" name="matrixfield" onchange=" dialoghandlerv54b60eb9da33d.onchanged('matrixfield');" onkeypress="return dialoghandlerv54b60eb9da33d.onkeypressed('matrixfield', event );" onkeydown="return (typeof(dialoghandlerv54b60eb9da33d.onkeydown) != 'undefined' ? dialoghandlerv54b60eb9da33d.onkeydown('matrixfield', event ) : true);" rows="5" cols="60"></textarea>
			</div>
		</div>
	<div id="dialogv54b60eb9da33d_messages">
		<script type="text/javascript">
		var dialogv54b60eb9da33d_messages_data={"OK":"Size of the matrix ","Error":"Error in line ","NonSquare":"Matrix is ​​not square , or is not set!","Zero":"Matrix is ​​not square , or is not set!"};
		</script>
	</div>

<script type="text/javascript">
PCF.advisePrecisionmeter( document.getElementById( "dialogv54b60eb9da33d_precisionmeter"),2,"dialoghandlerv54b60eb9da33d");
</script>
		<div id="dialogv54b60eb9da33d__line" class="labelctrl">
			<a id="dialogv54b60eb9da33d_calculate" href="#" onclick="dialoghandlerv54b60eb9da33d.recalculate(500); return BSPreventDefaultAction(event);" class="btn btn-calc pull-justify">
			<i style="display: none;" id="dialogv54b60eb9da33d_timerplace" class="fa fa-spinner fa-spin"></i> 
			<span id="dialogv54b60eb9da33d_button_text">Calculate</span>
			</a>
		</div>
<!--p-->
		<div class="fieldset calc_outputs" id="dialogv54b60eb9da33d_outputs0"><div class="control-group"><div class="control"><span style="visibility: visible;" class="textoutput" id="dialogv54b60eb9da33d_validation"></span><span class="textoutput_label">Notes:</span>
			</div></div>
			<div class="control-group">
				<div class="control">
					<span style="visibility: visible;" class="textoutput" id="dialogv54b60eb9da33d_det"></span>
					<span class="textoutput_label">Determinant of the matrix:</span>
				</div>
			</div>
		</div>
	</div>
</div>

<div><script type="text/javascript">
var dialogv54b60eb9da33d = new Dialogv54b60eb9da33d();
var dialoghandlerv54b60eb9da33d = new function ( ) {this.Dialog = null;this.CalculatorID = 1103;var savedData = {};var outerParent = this;
var Planetcalc = new function() { 
var innerParent = this;};this.initdialog = function ( dlg ) { this.Dialog = dlg;if ( !window.CurrentPageCalculators ) { window.CurrentPageCalculators = []; }
window.CurrentPageCalculators[window.CurrentPageCalculators.length]=this;this.outputs = {};this.outputTables={};this.Dialog.validation.formatter =new FormatterSame( );this.outputs['validation']=this.Dialog.validation;this.Dialog.det.formatter =new FormatterNumber( 2 );
this.outputs['det']=this.Dialog.det;if ( this.Dialog.matrixfield ) { PSS.LoadInput("1103","matrixfield", this.Dialog.matrixfield,savedData["matrixfield"]);}if ( this.Dialog.messages ) { PSS.LoadInput("1103","messages", this.Dialog.messages,savedData["messages"]);}this.setTimerIcon( true );this.notInitializedDataCount=0; this.refresh();};
this.showControlError = function ( e ) {if ( typeof(e)=="object" && e.source && e.message && this.Dialog[e.source] && this.Dialog[e.source].ShowError ) {this.Dialog[e.source].ShowError( e.message );return true; };return false; };this.GetInputValues = function ( ) {  var vals ={};vals['matrixfield'] = this.Dialog.matrixfield.GetValue();vals['messages'] = this.Dialog.messages.GetValue(); return vals; };
this.OnDataSource = function ( name, obj ) { this[ "dataSource_" + name ] = obj; this.notInitializedDataCount-=1; if ( 0==this.notInitializedDataCount) this.refresh(); };this.setTimerIcon = function ( enable ) {  var timerplace = document.getElementById("dialogv54b60eb9da33d_timerplace"); var logo = document.getElementById("dialogv54b60eb9da33d_logo"); var button = document.getElementById("dialogv54b60eb9da33d_calculate"); if ( timerplace && logo && button) { timerplace.style.display=(enable?"inline-block":"none"); }
 this.enableOutputs(!enable);};this.enableOutputs = function( enable ) {this.Dialog.validation.GetElement().style.visibility=(enable?"visible":"hidden");this.Dialog.det.GetElement().style.visibility=(enable?"visible":"hidden");};this.onkeypressed = function ( controlid, evt ) { return true;};this.refreshTimer= 0;this.onchanged = function ( controlid ) {var control  = this.Dialog[ controlid ];if ( control.ValidateCurrent() && this.Dialog.Validate() ) {  this.recalculate(1500);}};
 this.recalculate= function ( timeout ) {	this.changeDisplayOptions();if (this.progressControl.isInProgress()) { this.progressControl.stop(); return;}if (this.refreshTimer) { clearTimeout(this.refreshTimer); } dialoghandlerv54b60eb9da33d.setTimerIcon(true); this.refreshTimer=setTimeout('dialoghandlerv54b60eb9da33d.refresh()',timeout);if ( this.Dialog.matrixfield ) { PSS.SaveInput("1103","matrixfield", this.Dialog.matrixfield);}if ( this.Dialog.messages ) { PSS.SaveInput("1103","messages", this.Dialog.messages);}};
function CalcProgressControl( calcHandler ) { var me=this;	var shouldContinue=false;	var shouldStop=false;	me.context = null;	me.isInProgress=function( ){ return me.context!=null;}
	function setButtonLabel( lbl ){ document.getElementById("dialogv54b60eb9da33d_button_text").innerHTML=lbl; }this.stop=function(){};this.clear=function(){};this.repeat=function(){};this.shouldRepeat=function(){ return false;};};
this.progressControl = new CalcProgressControl( this );this.repeat = function() { this.refresh(true); }; this.refresh = function ( repeat ) {if ( !repeat ) { this.progressControl.context = null;}if ( this.notInitializedDataCount>0 ) return;clearTimeout(this.refreshTimer); this.refreshTimer=0;this.setTimerIcon(true);try {if ( !this.progressControl.context ) {}	this.changeDisplayOptions();this.calculate(this.Dialog.matrixfield.GetValue(), this.Dialog.messages.GetValue(), this.Dialog.validation, this.Dialog.det);} catch( e ) { 
if ( !this.showControlError( e )) {alert( e.message ); }}if ( this.progressControl.shouldRepeat() ) {	if (this.refreshTimer) { clearTimeout(this.refreshTimer); } this.refreshTimer=setTimeout('dialoghandlerv54b60eb9da33d.repeat()',200);this.enableOutputs(true);} else {this.setTimerIcon(false);this.progressControl.clear(); }};this.changeDisplayOptions = function () {this.calculateDisplay(new function ( val ) {this.GetValue = function() { return val.GetValue();}
this.Display = function( y ) { if( y ) val.Show(); else val.Hide(); }
}(this.Dialog.matrixfield), new function ( val ) {this.GetValue = function() { return val.GetValue();}
this.Display = function( y ) { if( y ) val.Show(); else val.Hide(); }
}(this.Dialog.messages), new function ( val ) {this.Display = function( y ) { if( y ) val.Show(); else val.Hide(); }
}(this.Dialog.validation), new function ( val ) {this.Display = function( y ) { if( y ) val.Show(); else val.Hide(); }
}(this.Dialog.det));}
this.calculateDisplay = function ( matrixfield, messages, validation, det )
 {};
this.calculate = function ( matrixfield, messages, validation, det ) {function MatrixParser()
{
	this.c_valid = 0;
	this.c_invalid = -1;
	this.c_empty = -2;
	this.error_line = -1;

	this.validation_result = this.c_valid;

	this.rows = -1;
	this.columns = -1;
	this.matrix = [];
	
	this.parse = function(matrixstring)
	{		
		var rows = matrixstring.split(/\r\n|\r|\n/);
		for(var i = 0; i < rows.length; ++i)
		{
			if (rows[i].length == 0)
				continue;
			var cols = rows[i].split(" ");
			var nums = [];
			for(var j = 0; j < cols.length; ++j)
			{
				if (cols[j].length == 0)
					continue;
				var num = Number(cols[j].replace(',', '.'));
				if (isNaN(num))
				{
					this.error_line = i + 1;
					this.validation_result = this.c_invalid;
					break;					
				}
				nums.push(num);
			}

			if (this.columns == -1)
				this.columns = nums.length;
			else if (this.columns != nums.length)
			{
				this.error_line = i + 1;
				this.validation_result = this.c_invalid;
				break;
			}
			if (this.validation_result == this.c_invalid)
				break;
			if (nums.length == 0)
			{
				this.validation_result = this.c_empty;
				break;
			}	
			this.matrix.push(nums);
		}
		this.rows = this.matrix.length;
	}	
}

function MatrixSolver()
{
	function get(matrixarray, i, j)
	{
		var row = matrixarray[i];
		return row[j];
	}

	function columns(matrixarray)
	{
		var row = matrixarray[0];
		return row.length;
	}

	function minor(matrixarray, i, j)
	{
		var m = [];
		for(var k = 0; k < matrixarray.length; ++k)
		{
			if (k == i)
				continue;
			var row = matrixarray[k];
			var newrow = [];
			for(var l = 0; l < row.length; ++l)
			{
				if (l == j)
					continue;
				newrow.push(row[l]);
			}
			m.push(newrow);
		}
		return m;
	}

	this.calcDeterminant = function(matrixarray)
	{
		if (matrixarray.length == 1)
			return get(matrixarray, 0, 0);
		else if (matrixarray.length == 2)
			return get(matrixarray, 0, 0) * get(matrixarray, 1, 1) - get(matrixarray, 0, 1) * get(matrixarray, 1, 0);
		else
		{
			var det = 0;
			var cols = columns(matrixarray);
			for (var i = 0; i < cols; ++i)
			{
				det += Math.pow(-1, i)*get(matrixarray, 0, i)*this.calcDeterminant(minor(matrixarray, 0, i));
			}
			return det;
		}
	}	
}

var parser = new MatrixParser();
parser.parse(matrixfield);
if (parser.validation_result == parser.c_empty)
{
	validation.SetValue(messages["Zero"]);
}
else if (parser.validation_result == parser.c_invalid)
{
	validation.SetValue(messages["Error"] + " " + parser.error_line);
}
else if (parser.validation_result == parser.c_valid)
{
	validation.SetValue(messages["OK"] + parser.rows + "x" + parser.columns);
	if (parser.rows != parser.columns)
		validation.SetValue(messages["NonSquare"]);
	else
	{
		var solver = new MatrixSolver();
		var determinant = solver.calcDeterminant(parser.matrix);
		det.SetValue(determinant);
	}
}
};};
dialoghandlerv54b60eb9da33d.initdialog(dialogv54b60eb9da33d);
</script>
</div>
<!------------------------------Inverse matrix--------------------->
<div class="article">
	<div class="article_body">
		<div>
		<script type="text/javascript">
		function Dialogv54b60ebb109c4() {this.GetElement = function () { return document.getElementById( "dialogv54b60ebb109c4" ); };this.GetEventHandlerName = function () { return "dialoghandlerv54b60ebb109c4"; };this.messages= new DialogInput("messages", this, null,new ElementAccessorResource());this.matrixA= new DialogInput("matrixA", this, null,new ElementAccessorDefault());this.precisionmeter= new DialogInput("precisionmeter", this, null,new ElementAccessorPrecision());this._line= new DialogInput("_line", this, null,new ElementAccessorDefault());this.outputs0= new DialogInput("outputs0", this, null,new ElementAccessorDefault());this.matrixR= new DialogInput("matrixR", this, null,new ElementAccessorDefault());this.Show = function () { ShowDialog("dialogv54b60ebb109c4"); };this.Hide = function () { HideDialog("dialogv54b60ebb109c4"); };this.Busy = function () { SetDialogBusy("dialogv54b60ebb109c4"); };this.Free = function () { SetDialogFree("dialogv54b60ebb109c4"); };this.SetValues = function ( values ) {for( var inputId in values ) {if ( this[inputId] ) { this[inputId].SetValue( values[inputId] ); }}};this.Clear = function ( ) {this.messages.ResetValue();this.matrixA.ResetValue();this.precisionmeter.ResetValue();this._line.ResetValue();this.matrixR.ResetValue();};this.SetDefaultValues = function () {this.messages.SetValue("");this.matrixA.SetValue("-1 2  5\n3 4  6\n-8 2 12");this.precisionmeter.SetValue("2");this._line.SetValue("<div class=\"form-actions\"><a  class=\"brand calclogo\" id=\"dialogv54b60ebb109c4_logo\" target=\"_top\"><img src=\"/img/logo_calc.png\" alt=\"PLANETCALC\"/> PLANETCALC </a><a id=\"dialogv54b60ebb109c4_calculate\" href=\"#\" onclick=\"dialoghandlerv54b60ebb109c4.recalculate(500); return BSPreventDefaultAction(event);\" class=\"btn btn-calc pull-right\"><i id=\"dialogv54b60ebb109c4_timerplace\" class=\"fa fa-spinner fa-spin\"></i> <span id=\"dialogv54b60ebb109c4_button_text\">Рассчитать</span></a></div>");this.matrixR.SetValue("");};this.GetValues = function () {var retval = {};retval["messages"]=this.messages.GetValue();retval["matrixA"]=this.matrixA.GetValue();retval["precisionmeter"]=this.precisionmeter.GetValue();retval["_line"]=this._line.GetValue();retval["matrixR"]=this.matrixR.GetValue();return retval;};this.ShowError = function ( obj, text ) {showError( obj, text, "error_box_v54b60ebb109c4");};this.Validate = function ( ) {if (!this.messages.ValidateCurrent() ) { return false; }if (!this.matrixA.ValidateCurrent() ) { return false; }if (!this.precisionmeter.ValidateCurrent() ) { return false; }if (!this._line.ValidateCurrent() ) { return false; }if (!this.matrixR.ValidateCurrent() ) { return false; }return true;};};
		</script>
		</div>
		
		<div class="form_calc" id="dialogv54b60ebb109c4">
			<div id="dialogv54b60ebb109c4_messages">
			<script type="text/javascript">
			var dialogv54b60ebb109c4_messages_data={"Error":"Error in line","Zero":"Matrix is not set","NonSquare":"Matrix is ​​not square","Singular":"The matrix is degenerate"};
			</script>
			</div>
			<legend id="dialogv54b60eb9da33d_legend">Inverse matrix</legend>
				<div class="control-group"><label class="control-label textarea" for="dialogv54b60ebb109c4_matrixA">Initial matrix:</label>
				<div class="controls"><textarea id="dialogv54b60ebb109c4_matrixA" name="matrixA" onchange=" dialoghandlerv54b60ebb109c4.onchanged('matrixA');" onkeypress="return dialoghandlerv54b60ebb109c4.onkeypressed('matrixA', event );" onkeydown="return (typeof(dialoghandlerv54b60ebb109c4.onkeydown) != 'undefined' ? dialoghandlerv54b60ebb109c4.onkeydown('matrixA', event ) : true);" rows="5" cols="60"></textarea></div></div>
		<div class="control-group">
		</div>
		<script type="text/javascript">
			PCF.advisePrecisionmeter( document.getElementById( "dialogv54b60ebb109c4_precisionmeter"),2,"dialoghandlerv54b60ebb109c4");
		</script>

		<div id="dialogv54b60ebb109c4__line" class="labelctrl">
			<a class="brand calclogo" id="dialogv54b60ebb109c4_logo" target="_top"><a id="dialogv54b60ebb109c4_calculate" href="#" onclick="dialoghandlerv54b60ebb109c4.recalculate(500); return BSPreventDefaultAction(event);" class="btn btn-calc pull-center"><i style="display: none;" id="dialogv54b60ebb109c4_timerplace" class="fa fa-spinner fa-spin"></i> <span id="dialogv54b60ebb109c4_button_text">Calculate</span></a>
		</div>

<!--p-->
	<div class="fieldset calc_outputs" id="dialogv54b60ebb109c4_outputs0">
			<label for="dialogv54b60ebb109c4_matrixR">Inverse matrix:</label>
			<div style="visibility: visible;" class="matrix" id="dialogv54b60ebb109c4_matrixR"><table class="table table-bordered"><tbody><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr></tbody></table></div>
	</div>
		</div>
	</div>
</div><div>
<script type="text/javascript">
var dialogv54b60ebb109c4 = new Dialogv54b60ebb109c4();
var dialoghandlerv54b60ebb109c4 = new function ( ) {this.Dialog = null;this.CalculatorID = 1218;var savedData = {};var outerParent = this;
var Planetcalc = new function() { 
var innerParent = this;};this.initdialog = function ( dlg ) { this.Dialog = dlg;if ( !window.CurrentPageCalculators ) { window.CurrentPageCalculators = []; }window.CurrentPageCalculators[window.CurrentPageCalculators.length]=this;this.outputs = {};this.outputTables={};this.Dialog.matrixR.formatter =new FormatterMatrix(2);this.outputs['matrixR']=this.Dialog.matrixR;if ( this.Dialog.messages ) { PSS.LoadInput("1218","messages", this.Dialog.messages,savedData["messages"]);}if ( this.Dialog.matrixA ) { PSS.LoadInput("1218","matrixA", this.Dialog.matrixA,savedData["matrixA"]);}this.setTimerIcon( true );this.notInitializedDataCount=0; this.refresh();};this.showControlError = function ( e ) {if ( typeof(e)=="object" && e.source && e.message && this.Dialog[e.source] && this.Dialog[e.source].ShowError ) {this.Dialog[e.source].ShowError( e.message );return true; };return false; };this.GetInputValues = function ( ) {  var vals ={};vals['messages'] = this.Dialog.messages.GetValue();vals['matrixA'] = this.Dialog.matrixA.GetValue(); return vals; };this.OnDataSource = function ( name, obj ) { this[ "dataSource_" + name ] = obj; this.notInitializedDataCount-=1; if ( 0==this.notInitializedDataCount) this.refresh(); };this.setTimerIcon = function ( enable ) {  var timerplace = document.getElementById("dialogv54b60ebb109c4_timerplace"); var logo = document.getElementById("dialogv54b60ebb109c4_logo"); var button = document.getElementById("dialogv54b60ebb109c4_calculate"); if ( timerplace && logo && button) { timerplace.style.display=(enable?"inline-block":"none"); } this.enableOutputs(!enable);};this.enableOutputs = function( enable ) {this.Dialog.matrixR.GetElement().style.visibility=(enable?"visible":"hidden");};this.onkeypressed = function ( controlid, evt ) { return true;};this.refreshTimer= 0;this.onchanged = function ( controlid ) {var control  = this.Dialog[ controlid ];if ( control.ValidateCurrent() && this.Dialog.Validate() ) {  this.recalculate(1500);}};this.recalculate= function ( timeout ) {	this.changeDisplayOptions();if (this.progressControl.isInProgress()) { this.progressControl.stop(); return;}if (this.refreshTimer) { clearTimeout(this.refreshTimer); } dialoghandlerv54b60ebb109c4.setTimerIcon(true); this.refreshTimer=setTimeout('dialoghandlerv54b60ebb109c4.refresh()',timeout);if ( this.Dialog.messages ) { PSS.SaveInput("1218","messages", this.Dialog.messages);}if ( this.Dialog.matrixA ) { PSS.SaveInput("1218","matrixA", this.Dialog.matrixA);}};
function CalcProgressControl( calcHandler ) { var me=this;	var shouldContinue=false;	var shouldStop=false;	me.context = null;	me.isInProgress=function( ){ return me.context!=null;}
	function setButtonLabel( lbl ){ document.getElementById("dialogv54b60ebb109c4_button_text").innerHTML=lbl; }this.stop=function(){};this.clear=function(){};this.repeat=function(){};this.shouldRepeat=function(){ return false;};};
this.progressControl = new CalcProgressControl( this );this.repeat = function() { this.refresh(true); }; this.refresh = function ( repeat ) {if ( !repeat ) { this.progressControl.context = null;}if ( this.notInitializedDataCount>0 ) return;clearTimeout(this.refreshTimer); this.refreshTimer=0;this.setTimerIcon(true);try {if ( !this.progressControl.context ) {}	this.changeDisplayOptions();this.calculate(this.Dialog.messages.GetValue(), this.Dialog.matrixA.GetValue(), this.Dialog.matrixR);} catch( e ) { 
if ( !this.showControlError( e )) {alert( e.message ); }}if ( this.progressControl.shouldRepeat() ) {	if (this.refreshTimer) { clearTimeout(this.refreshTimer); } this.refreshTimer=setTimeout('dialoghandlerv54b60ebb109c4.repeat()',200);this.enableOutputs(true);} else {this.setTimerIcon(false);this.progressControl.clear(); }};this.changeDisplayOptions = function () {this.calculateDisplay(new function ( val ) {this.GetValue = function() { return val.GetValue();}
this.Display = function( y ) { if( y ) val.Show(); else val.Hide(); }
}(this.Dialog.messages), new function ( val ) {this.GetValue = function() { return val.GetValue();}
this.Display = function( y ) { if( y ) val.Show(); else val.Hide(); }
}(this.Dialog.matrixA), new function ( val ) {this.Display = function( y ) { if( y ) val.Show(); else val.Hide(); }
}(this.Dialog.matrixR));}
this.calculateDisplay = function ( messages, matrixA, matrixR )
 {};
this.calculate = function ( messages, matrixA, matrixR ) {function MatrixParser()
{
	this.c_valid = 0;
	this.c_invalid = -1;
	this.c_empty = -2;
	this.error_line = -1;

	this.rows = -1;
	this.columns = -1;
	this.matrix = [];
	
	this.parse = function(matrixstring)
	{		
		var rows = matrixstring.split(/\r\n|\r|\n/);
		for(var i = 0; i < rows.length; ++i)
		{
			if (rows[i].length == 0)
				continue;
			var cols = rows[i].split(/\s|\t/);
			var nums = [];
			for(var j = 0; j < cols.length; ++j)
			{
				if (cols[j].length == 0)
					continue;
				var num = Number(cols[j].replace(',', '.'));
				if (isNaN(num))
				{
					this.error_line = i + 1;
					throw this.c_invalid;
					break;					
				}
				nums.push(num);
			}

			if (this.columns == -1)
				this.columns = nums.length;
			else if (this.columns != nums.length)
			{
				this.error_line = i + 1;
				throw this.c_invalid;
				break;
			}
			if (nums.length == 0)
			{
				throw this.c_empty;
				break;
			}	
			this.matrix.push(nums);
		}
		if (this.matrix.length == 0)
			throw this.c_empty;
		this.rows = this.matrix.length;
	}	
}

function MatrixSolver()
{
	this.c_valid = 0;
	this.c_nonsquare = -1;
	this.c_singular = -2;
	this.c_wrongdimensions = -3;

	function get(matrixarray, i, j)
	{
		var row = matrixarray[i];
		return row[j];
	}

	function columns(matrixarray)
	{
		var row = matrixarray[0];
		return row.length;
	}

	function rows(matrixarray)
	{
		return matrixarray.length;
	}

	function minor(matrixarray, i, j)
	{
		var m = [];
		for(var k = 0; k < matrixarray.length; ++k)
		{
			if (k == i)
				continue;
			var row = matrixarray[k];
			var newrow = [];
			for(var l = 0; l < row.length; ++l)
			{
				if (l == j)
					continue;
				newrow.push(row[l]);
			}
			m.push(newrow);
		}
		return m;
	}

	this.calcMultiplication = function(matrixA, matrixB)
	{
		var result = [];
		var columnsA = columns(matrixA);
		var rowsA = rows(matrixA);
		var columnsB = columns(matrixB);
		var rowsB = rows(matrixB);

		if (columnsA != rowsB)
			throw this.c_wrongdimensions;

		for (var i = 0; i < rowsA; ++i)
		{
			var newrow = [];
			for (var j = 0; j < columnsB; ++j)
			{		
				var value = 0;
				for (var k = 0; k < rowsB; ++k)
				{
					value += get(matrixA, i, k) * get(matrixB, k, j);
				}
				newrow.push(value);
			}
			result.push(newrow);
		}
		return result;
	}	

	this.calcTransponent = function(matrixarray)
	{
		var transponent = [];
		var cols = columns(matrixarray);
		for (var i = 0; i < cols; ++i)
		{
			var newrow = [];
			var rowscount = rows(matrixarray);
			for (var j = 0; j < rowscount; ++j)
			{
				newrow[newrow.length] = get(matrixarray, j, i);
			}
			transponent[transponent.length] = newrow;
		}
		return transponent;
	}	

	this.calcScalar = function(matrixarray, scalarValue)
	{
		var scalar = [];
		var cols = columns(matrixarray);
		for (var i = 0; i < cols; ++i)
		{
			var newrow = [];
			var rowscount = rows(matrixarray);
			for (var j = 0; j < rowscount; ++j)
			{
				newrow.push(get(matrixarray, i, j)*scalarValue);
			}
			scalar.push(newrow);
		}
		return scalar;
	}

	this.calcDeterminant = function(matrixarray)
	{
		var columnsA = columns(matrixarray);
		var rowsA = rows(matrixarray);
		if (columnsA != rowsA)
			throw this.c_nonsquare;
		
		if (matrixarray.length == 1)
			return get(matrixarray, 0, 0);
		else if (matrixarray.length == 2)
			return get(matrixarray, 0, 0) * get(matrixarray, 1, 1) - get(matrixarray, 0, 1) * get(matrixarray, 1, 0);
		else
		{
			var det = 0;
			var cols = columns(matrixarray);
			for (var i = 0; i < cols; ++i)
			{
				det += Math.pow(-1, i)*get(matrixarray, 0, i)*this.calcDeterminant(minor(matrixarray, 0, i));
			}
			return det;
		}
	}	

	this.calcInverse = function(matrixarray)
	{
		var columnsA = columns(matrixarray);
		var rowsA = rows(matrixarray);
		if (columnsA != rowsA)
			throw this.c_nonsquare;
		var detA = this.calcDeterminant(matrixarray);
		if (detA == 0)
			throw this.c_singular;
		var minorsmatrix = [];
		for(var i = 0; i < rowsA; ++i)
		{
			var newrow = [];
			for(var j = 0; j < columnsA; ++j)
			{
				var val = this.calcDeterminant(minor(matrixarray, i,j));
				val = val * Math.pow(-1, i+j);
				newrow.push(val);
			}
			minorsmatrix.push(newrow);
		}
		var transponentminors = this.calcTransponent(minorsmatrix);
		var scalarresult = this.calcScalar(transponentminors, 1/detA);
		return scalarresult;
	}
}

matrixR.SetValue([]);

var parserA = new MatrixParser();
try
{
	parserA.parse(matrixA);	
}
catch(err)
{
	if (err == parserA.c_empty)
		throw {"source": "matrixA", "message": messages["Zero"] };
	else if (err == parserA.c_invalid)
		throw {"source": "matrixA", "message": (messages["Error"] + " " + parserA.error_line) };
	else
		alert(err);	
}

var solver = new MatrixSolver();
try
{
	var res = solver.calcInverse(parserA.matrix);
	matrixR.SetValue(res);
}
catch(err)
{
	if (err == solver.c_nonsquare)
		throw {"source": "matrixA", "message": messages["NonSquare"] };
	else if (err == solver.c_singular)
		throw {"source": "matrixA", "message": messages["Singular"] };	
	else
		alert(err);	
}
};};
dialoghandlerv54b60ebb109c4.initdialog(dialogv54b60ebb109c4);
</script>
</div>

<!---------------------------Transpose matrix------------------------------>
<div><script type="text/javascript">
function Dialogv54b60ebadf4ef() {this.GetElement = function () { return document.getElementById( "dialogv54b60ebadf4ef" ); };this.GetEventHandlerName = function () { return "dialoghandlerv54b60ebadf4ef"; };this.messages= new DialogInput("messages", this, null,new ElementAccessorResource());this.matrixfield= new DialogInput("matrixfield", this, null,new ElementAccessorDefault());this.precisionmeter= new DialogInput("precisionmeter", this, null,new ElementAccessorPrecision());this._line= new DialogInput("_line", this, null,new ElementAccessorDefault());this.outputs0= new DialogInput("outputs0", this, null,new ElementAccessorDefault());this.validation= new DialogInput("validation", this, null,new ElementAccessorOutput());this.matrixT= new DialogInput("matrixT", this, null,new ElementAccessorDefault());this.Show = function () { ShowDialog("dialogv54b60ebadf4ef"); };this.Hide = function () { HideDialog("dialogv54b60ebadf4ef"); };this.Busy = function () { SetDialogBusy("dialogv54b60ebadf4ef"); };this.Free = function () { SetDialogFree("dialogv54b60ebadf4ef"); };this.SetValues = function ( values ) {for( var inputId in values ) {if ( this[inputId] ) { this[inputId].SetValue( values[inputId] ); }}};this.Clear = function ( ) {this.messages.ResetValue();this.matrixfield.ResetValue();this.precisionmeter.ResetValue();this._line.ResetValue();this.validation.ResetValue();this.matrixT.ResetValue();};this.SetDefaultValues = function () {this.messages.SetValue("OK");this.matrixfield.SetValue("-1 2  5\n3 4  6\n-8 2 12");this.precisionmeter.SetValue("2");this._line.SetValue("<div class=\"form-actions\"><a  class=\"brand calclogo\" id=\"dialogv54b60ebadf4ef_logo\" href=\"http://planetcalc.ru/1204/?license=1\" target=\"_top\"><img src=\"/img/logo_calc.png\" alt=\"PLANETCALC\"/> PLANETCALC </a><a id=\"dialogv54b60ebadf4ef_calculate\" href=\"#\" onclick=\"dialoghandlerv54b60ebadf4ef.recalculate(500); return BSPreventDefaultAction(event);\" class=\"btn btn-calc pull-right\"><i id=\"dialogv54b60ebadf4ef_timerplace\" class=\"fa fa-spinner fa-spin\"></i> <span id=\"dialogv54b60ebadf4ef_button_text\">Рассчитать</span></a></div>");this.validation.SetValue("");this.matrixT.SetValue("");};this.GetValues = function () {var retval = {};retval["messages"]=this.messages.GetValue();retval["matrixfield"]=this.matrixfield.GetValue();retval["precisionmeter"]=this.precisionmeter.GetValue();retval["_line"]=this._line.GetValue();retval["validation"]=this.validation.GetValue();retval["matrixT"]=this.matrixT.GetValue();return retval;};this.ShowError = function ( obj, text ) {showError( obj, text, "error_box_v54b60ebadf4ef");};this.Validate = function ( ) {if (!this.messages.ValidateCurrent() ) { return false; }if (!this.matrixfield.ValidateCurrent() ) { return false; }if (!this.precisionmeter.ValidateCurrent() ) { return false; }if (!this._line.ValidateCurrent() ) { return false; }if (!this.validation.ValidateCurrent() ) { return false; }if (!this.matrixT.ValidateCurrent() ) { return false; }return true;};};
</script></div>

<div class="form_calc" id="dialogv54b60ebadf4ef">
<div class="fieldset "><legend id="dialogv54b60ebadf4ef_legend">Transpose matrix</legend><div id="dialogv54b60ebadf4ef_messages">
<script type="text/javascript">
var dialogv54b60ebadf4ef_messages_data={"OK":"Size of matrix ","Error":"Error in line ","Zero":"Matrix is not set","NonSquare":"Matrix is not square"};
</script>
</div>
<div class="control-group"><label class="control-label textarea" for="dialogv54b60ebadf4ef_matrixfield">Matrix:</label><div class="controls"><textarea id="dialogv54b60ebadf4ef_matrixfield" name="matrixfield" onchange=" dialoghandlerv54b60ebadf4ef.onchanged('matrixfield');" onkeypress="return dialoghandlerv54b60ebadf4ef.onkeypressed('matrixfield', event );" onkeydown="return (typeof(dialoghandlerv54b60ebadf4ef.onkeydown) != 'undefined' ? dialoghandlerv54b60ebadf4ef.onkeydown('matrixfield', event ) : true);" rows="5" cols="60">
</textarea>
</div></div>
<script type="text/javascript">
PCF.advisePrecisionmeter( document.getElementById( "dialogv54b60ebadf4ef_precisionmeter"),2,"dialoghandlerv54b60ebadf4ef");
</script>

<a id="dialogv54b60ebadf4ef_calculate" href="#" onclick="dialoghandlerv54b60ebadf4ef.recalculate(500); return BSPreventDefaultAction(event);" class="btn btn-calc pull-center"><i style="display: none;" id="dialogv54b60ebadf4ef_timerplace" class="fa fa-spinner fa-spin"></i> 
<span id="dialogv54b60ebadf4ef_button_text">Calculate</span></a>

<div class="fieldset calc_outputs" id="dialogv54b60ebadf4ef_outputs0">
<p>
<div class="control-group"><div class="control"><span style="visibility: visible;" class="textoutput" id="dialogv54b60ebadf4ef_validation">Size of matrix 3x3</span><span class="textoutput_label">Parse of the input data: </span></div></div><label for="dialogv54b60ebadf4ef_matrixT">Transposed matrix:</label><div style="visibility: visible;" class="matrix" id="dialogv54b60ebadf4ef_matrixT"><table class="table table-bordered"><tbody><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr></tbody></table></div></div></div></div><div><script type="text/javascript">
var dialogv54b60ebadf4ef = new Dialogv54b60ebadf4ef();
var dialoghandlerv54b60ebadf4ef = new function ( ) {this.Dialog = null;this.CalculatorID = 1204;var savedData = {};var outerParent = this;
var Planetcalc = new function() { 
var innerParent = this;};this.initdialog = function ( dlg ) { this.Dialog = dlg;if ( !window.CurrentPageCalculators ) { window.CurrentPageCalculators = []; }window.CurrentPageCalculators[window.CurrentPageCalculators.length]=this;this.outputs = {};this.outputTables={};this.Dialog.matrixT.formatter =new FormatterMatrix(2);this.outputs['matrixT']=this.Dialog.matrixT;this.Dialog.validation.formatter =new FormatterSame( );this.outputs['validation']=this.Dialog.validation;if ( this.Dialog.messages ) { PSS.LoadInput("1204","messages", this.Dialog.messages,savedData["messages"]);}if ( this.Dialog.matrixfield ) { PSS.LoadInput("1204","matrixfield", this.Dialog.matrixfield,savedData["matrixfield"]);}this.setTimerIcon( true );this.notInitializedDataCount=0; this.refresh();};this.showControlError = function ( e ) {if ( typeof(e)=="object" && e.source && e.message && this.Dialog[e.source] && this.Dialog[e.source].ShowError ) {this.Dialog[e.source].ShowError( e.message );return true; };return false; };this.GetInputValues = function ( ) {  var vals ={};vals['messages'] = this.Dialog.messages.GetValue();vals['matrixfield'] = this.Dialog.matrixfield.GetValue(); return vals; };this.OnDataSource = function ( name, obj ) { this[ "dataSource_" + name ] = obj; this.notInitializedDataCount-=1; if ( 0==this.notInitializedDataCount) this.refresh(); };this.setTimerIcon = function ( enable ) {  var timerplace = document.getElementById("dialogv54b60ebadf4ef_timerplace"); var logo = document.getElementById("dialogv54b60ebadf4ef_logo"); var button = document.getElementById("dialogv54b60ebadf4ef_calculate"); if ( timerplace && logo && button) { timerplace.style.display=(enable?"inline-block":"none"); } this.enableOutputs(!enable);};this.enableOutputs = function( enable ) {this.Dialog.matrixT.GetElement().style.visibility=(enable?"visible":"hidden");this.Dialog.validation.GetElement().style.visibility=(enable?"visible":"hidden");};this.onkeypressed = function ( controlid, evt ) { return true;};this.refreshTimer= 0;this.onchanged = function ( controlid ) {var control  = this.Dialog[ controlid ];if ( control.ValidateCurrent() && this.Dialog.Validate() ) {  this.recalculate(1500);}};this.recalculate= function ( timeout ) {	this.changeDisplayOptions();if (this.progressControl.isInProgress()) { this.progressControl.stop(); return;}if (this.refreshTimer) { clearTimeout(this.refreshTimer); } dialoghandlerv54b60ebadf4ef.setTimerIcon(true); this.refreshTimer=setTimeout('dialoghandlerv54b60ebadf4ef.refresh()',timeout);if ( this.Dialog.messages ) { PSS.SaveInput("1204","messages", this.Dialog.messages);}if ( this.Dialog.matrixfield ) { PSS.SaveInput("1204","matrixfield", this.Dialog.matrixfield);}};
function CalcProgressControl( calcHandler ) { var me=this;	var shouldContinue=false;	var shouldStop=false;	me.context = null;	me.isInProgress=function( ){ return me.context!=null;}
	function setButtonLabel( lbl ){ document.getElementById("dialogv54b60ebadf4ef_button_text").innerHTML=lbl; }this.stop=function(){};this.clear=function(){};this.repeat=function(){};this.shouldRepeat=function(){ return false;};};
this.progressControl = new CalcProgressControl( this );this.repeat = function() { this.refresh(true); }; this.refresh = function ( repeat ) {if ( !repeat ) { this.progressControl.context = null;}if ( this.notInitializedDataCount>0 ) return;clearTimeout(this.refreshTimer); this.refreshTimer=0;this.setTimerIcon(true);try {if ( !this.progressControl.context ) {}	this.changeDisplayOptions();this.calculate(this.Dialog.messages.GetValue(), this.Dialog.matrixfield.GetValue(), this.Dialog.matrixT, this.Dialog.validation);} catch( e ) { 
if ( !this.showControlError( e )) {alert( e.message ); }}if ( this.progressControl.shouldRepeat() ) {	if (this.refreshTimer) { clearTimeout(this.refreshTimer); } this.refreshTimer=setTimeout('dialoghandlerv54b60ebadf4ef.repeat()',200);this.enableOutputs(true);} else {this.setTimerIcon(false);this.progressControl.clear(); }};this.changeDisplayOptions = function () {this.calculateDisplay(new function ( val ) {this.GetValue = function() { return val.GetValue();}
this.Display = function( y ) { if( y ) val.Show(); else val.Hide(); }
}(this.Dialog.messages), new function ( val ) {this.GetValue = function() { return val.GetValue();}
this.Display = function( y ) { if( y ) val.Show(); else val.Hide(); }
}(this.Dialog.matrixfield), new function ( val ) {this.Display = function( y ) { if( y ) val.Show(); else val.Hide(); }
}(this.Dialog.matrixT), new function ( val ) {this.Display = function( y ) { if( y ) val.Show(); else val.Hide(); }
}(this.Dialog.validation));}
this.calculateDisplay = function ( messages, matrixfield, matrixT, validation )
 {};
this.calculate = function ( messages, matrixfield, matrixT, validation ) {function MatrixParser()
{
	this.c_valid = 0;
	this.c_invalid = -1;
	this.c_empty = -2;
	this.error_line = -1;

	this.validation_result = this.c_valid;

	this.rows = -1;
	this.columns = -1;
	this.matrix = [];
	
	this.parse = function(matrixstring)
	{		
		var rows = matrixstring.split(/\r\n|\r|\n/);
		for(var i = 0; i < rows.length; ++i)
		{
			if (rows[i].length == 0)
				continue;
			var cols = rows[i].split(" ");
			var nums = [];
			for(var j = 0; j < cols.length; ++j)
			{
				if (cols[j].length == 0)
					continue;
				var num = Number(cols[j].replace(',', '.'));
				if (isNaN(num))
				{
					this.error_line = i + 1;
					this.validation_result = this.c_invalid;
					break;					
				}
				nums.push(num);
			}

			if (this.columns == -1)
				this.columns = nums.length;
			else if (this.columns != nums.length)
			{
				this.error_line = i + 1;
				this.validation_result = this.c_invalid;
				break;
			}
			if (this.validation_result == this.c_invalid)
				break;
			if (nums.length == 0)
			{
				this.validation_result = this.c_empty;
				break;
			}	
			this.matrix.push(nums);
		}
		this.rows = this.matrix.length;
	}	
}

function MatrixSolver()
{
	function get(matrixarray, i, j)
	{
		var row = matrixarray[i];
		return row[j];
	}

	function columns(matrixarray)
	{
		var row = matrixarray[0];
		return row.length;
	}

	function rows(matrixarray)
	{
		return matrixarray.length;
	}

	function minor(matrixarray, i, j)
	{
		var m = [];
		for(var k = 0; k < matrixarray.length; ++k)
		{
			if (k == i)
				continue;
			var row = matrixarray[k];
			var newrow = [];
			for(var l = 0; l < row.length; ++l)
			{
				if (l == j)
					continue;
				newrow.push(row[l]);
			}
			m.push(newrow);
		}
		return m;
	}

	this.calcTransponent = function(matrixarray)
	{
		var transponent = [];
		var cols = columns(matrixarray);
		for (var i = 0; i < cols; ++i)
		{
			var newrow = [];
			var rowscount = rows(matrixarray);
			for (var j = 0; j < rowscount; ++j)
			{
				newrow[newrow.length] = get(matrixarray, j, i);
			}
			transponent[transponent.length] = newrow;
		}
		return transponent;
	}	

	this.calcDeterminant = function(matrixarray)
	{
		if (matrixarray.length == 1)
			return get(matrixarray, 0, 0);
		else if (matrixarray.length == 2)
			return get(matrixarray, 0, 0) * get(matrixarray, 1, 1) - get(matrixarray, 0, 1) * get(matrixarray, 1, 0);
		else
		{
			var det = 0;
			var cols = columns(matrixarray);
			for (var i = 0; i < cols; ++i)
			{
				det += Math.pow(-1, i)*get(matrixarray, 0, i)*this.calcDeterminant(minor(matrixarray, 0, i));
			}
			return det;
		}
	}	
}

var parser = new MatrixParser();
parser.parse(matrixfield);
if (parser.validation_result == parser.c_empty)
{
	validation.SetValue(messages["Zero"]);
}
else if (parser.validation_result == parser.c_invalid)
{
	validation.SetValue(messages["Error"] + " " + parser.error_line);
}
else if (parser.validation_result == parser.c_valid)
{
	validation.SetValue(messages["OK"] + parser.rows + "x" + parser.columns);
	var solver = new MatrixSolver();
	var transponent = solver.calcTransponent(parser.matrix);
	matrixT.SetValue(transponent);
}
};};
dialoghandlerv54b60ebadf4ef.initdialog(dialogv54b60ebadf4ef);
</script>
</div>
<!-----------------------------Matrix multiplication--------------------------------->
	<div class="input_error" id="error_box_v54b60ebaec3bd" onclick="this.style.display='none';"></div>
	<div><script type="text/javascript">
		function Dialogv54b60ebaec3bd() {this.GetElement = function () { return document.getElementById( "dialogv54b60ebaec3bd" ); };this.GetEventHandlerName = function () { return "dialoghandlerv54b60ebaec3bd"; };this.matrixA= new DialogInput("matrixA", this, null,new ElementAccessorDefault());this.matrixB= new DialogInput("matrixB", this, null,new ElementAccessorDefault());this.messages= new DialogInput("messages", this, null,new ElementAccessorResource());this.precisionmeter= new DialogInput("precisionmeter", this, null,new ElementAccessorPrecision());this._line= new DialogInput("_line", this, null,new ElementAccessorDefault());this.outputs0= new DialogInput("outputs0", this, null,new ElementAccessorDefault());this.matrixR= new DialogInput("matrixR", this, null,new ElementAccessorDefault());this.validation= new DialogInput("validation", this, null,new ElementAccessorOutput());this.Show = function () { ShowDialog("dialogv54b60ebaec3bd"); };this.Hide = function () { HideDialog("dialogv54b60ebaec3bd"); };this.Busy = function () { SetDialogBusy("dialogv54b60ebaec3bd"); };this.Free = function () { SetDialogFree("dialogv54b60ebaec3bd"); };this.SetValues = function ( values ) {for( var inputId in values ) {if ( this[inputId] ) { this[inputId].SetValue( values[inputId] ); }}};this.Clear = function ( ) {this.matrixA.ResetValue();this.matrixB.ResetValue();this.messages.ResetValue();this.precisionmeter.ResetValue();this._line.ResetValue();this.matrixR.ResetValue();this.validation.ResetValue();};this.SetDefaultValues = function () {this.matrixA.SetValue("-1 2  5\n3 4  6\n-8 2 12");this.matrixB.SetValue("-2 2\n5 7\n-1 4");this.messages.SetValue("OK");this.precisionmeter.SetValue("2");this._line.SetValue("<div class=\"form-actions\"><a  class=\"brand calclogo\" id=\"dialogv54b60ebaec3bd_logo\" href=\"http://planetcalc.ru/1207/?license=1\" target=\"_top\"><img src=\"/img/logo_calc.png\" alt=\"PLANETCALC\"/> PLANETCALC </a><a id=\"dialogv54b60ebaec3bd_calculate\" href=\"#\" onclick=\"dialoghandlerv54b60ebaec3bd.recalculate(500); return BSPreventDefaultAction(event);\" class=\"btn btn-calc pull-right\"><i id=\"dialogv54b60ebaec3bd_timerplace\" class=\"fa fa-spinner fa-spin\"></i> <span id=\"dialogv54b60ebaec3bd_button_text\">Calculate</span></a></div>");this.matrixR.SetValue("");this.validation.SetValue("");};this.GetValues = function () {var retval = {};retval["matrixA"]=this.matrixA.GetValue();retval["matrixB"]=this.matrixB.GetValue();retval["messages"]=this.messages.GetValue();retval["precisionmeter"]=this.precisionmeter.GetValue();retval["_line"]=this._line.GetValue();retval["matrixR"]=this.matrixR.GetValue();retval["validation"]=this.validation.GetValue();return retval;};this.ShowError = function ( obj, text ) {showError( obj, text, "error_box_v54b60ebaec3bd");};this.Validate = function ( ) {if (!this.matrixA.ValidateCurrent() ) { return false; }if (!this.matrixB.ValidateCurrent() ) { return false; }if (!this.messages.ValidateCurrent() ) { return false; }if (!this.precisionmeter.ValidateCurrent() ) { return false; }if (!this._line.ValidateCurrent() ) { return false; }if (!this.matrixR.ValidateCurrent() ) { return false; }if (!this.validation.ValidateCurrent() ) { return false; }return true;};};
		</script>
	</div>
	
<div class="form_calc" id="dialogv54b60ebaec3bd">
	<div class="fieldset "><legend id="dialogv54b60ebaec3bd_legend">Matrix multiplication</legend>
	<div class="control-group"><label class="control-label textarea" for="dialogv54b60ebaec3bd_matrixA">Matrix А:</label><div class="controls"><textarea id="dialogv54b60ebaec3bd_matrixA" name="matrixA" onchange=" dialoghandlerv54b60ebaec3bd.onchanged('matrixA');" onkeypress="return dialoghandlerv54b60ebaec3bd.onkeypressed('matrixA', event );" onkeydown="return (typeof(dialoghandlerv54b60ebaec3bd.onkeydown) != 'undefined' ? dialoghandlerv54b60ebaec3bd.onkeydown('matrixA', event ) : true);" rows="5" cols="60">
	</textarea>
	</div></div>
	
	<div class="control-group"><label class="control-label textarea" for="dialogv54b60ebaec3bd_matrixB">Matrix B:</label><div class="controls"><textarea id="dialogv54b60ebaec3bd_matrixB" name="matrixB" onchange=" dialoghandlerv54b60ebaec3bd.onchanged('matrixB');" onkeypress="return dialoghandlerv54b60ebaec3bd.onkeypressed('matrixB', event );" onkeydown="return (typeof(dialoghandlerv54b60ebaec3bd.onkeydown) != 'undefined' ? dialoghandlerv54b60ebaec3bd.onkeydown('matrixB', event ) : true);" rows="5" cols="60">
	</textarea>
	</div></div>
	<div id="dialogv54b60ebaec3bd_messages">
	<script type="text/javascript">
		var dialogv54b60ebaec3bd_messages_data={"OK":"Ок","Error":"Error in line","Zero":"Matrix is not set","NonFit":"The number of columns of the matrix A does not coincide with the number of rows of the matrix B, the matrix is not set"};
	</script>
	</div>

<script type="text/javascript">
PCF.advisePrecisionmeter( document.getElementById( "dialogv54b60ebaec3bd_precisionmeter"),2,"dialoghandlerv54b60ebaec3bd");
</script>
<div id="dialogv54b60ebaec3bd__line" class="labelctrl">
<a id="dialogv54b60ebaec3bd_calculate" href="#" onclick="dialoghandlerv54b60ebaec3bd.recalculate(500); return BSPreventDefaultAction(event);" class="btn btn-calc pull-center"><i style="display: none;" id="dialogv54b60ebaec3bd_timerplace" class="fa fa-spinner fa-spin"></i> <span id="dialogv54b60ebaec3bd_button_text">Calculate</span></a>

</div>

<p>
<div class="fieldset calc_outputs" id="dialogv54b60ebaec3bd_outputs0"><label for="dialogv54b60ebaec3bd_matrixR">Result:</label><div style="visibility: visible;" class="matrix" id="dialogv54b60ebaec3bd_matrixR"><table class="table table-bordered"><tbody><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr></tbody></table></div><div class="control-group"><div class="control"><span style="visibility: visible;" class="textoutput" id="dialogv54b60ebaec3bd_validation">Ок</span><span class="textoutput_label">Parse of the input data:</span></div></div></div></div></div><div>

<script type="text/javascript">
var dialogv54b60ebaec3bd = new Dialogv54b60ebaec3bd();
var dialoghandlerv54b60ebaec3bd = new function ( ) {this.Dialog = null;this.CalculatorID = 1207;var savedData = {};var outerParent = this;
var Planetcalc = new function() { 
var innerParent = this;};this.initdialog = function ( dlg ) { this.Dialog = dlg;if ( !window.CurrentPageCalculators ) { window.CurrentPageCalculators = []; }window.CurrentPageCalculators[window.CurrentPageCalculators.length]=this;this.outputs = {};this.outputTables={};this.Dialog.matrixR.formatter =new FormatterMatrix(2);this.outputs['matrixR']=this.Dialog.matrixR;this.Dialog.validation.formatter =new FormatterSame( );this.outputs['validation']=this.Dialog.validation;if ( this.Dialog.matrixA ) { PSS.LoadInput("1207","matrixA", this.Dialog.matrixA,savedData["matrixA"]);}if ( this.Dialog.matrixB ) { PSS.LoadInput("1207","matrixB", this.Dialog.matrixB,savedData["matrixB"]);}if ( this.Dialog.messages ) { PSS.LoadInput("1207","messages", this.Dialog.messages,savedData["messages"]);}this.setTimerIcon( true );this.notInitializedDataCount=0; this.refresh();};this.showControlError = function ( e ) {if ( typeof(e)=="object" && e.source && e.message && this.Dialog[e.source] && this.Dialog[e.source].ShowError ) {this.Dialog[e.source].ShowError( e.message );return true; };return false; };this.GetInputValues = function ( ) {  var vals ={};vals['matrixA'] = this.Dialog.matrixA.GetValue();vals['matrixB'] = this.Dialog.matrixB.GetValue();vals['messages'] = this.Dialog.messages.GetValue(); return vals; };this.OnDataSource = function ( name, obj ) { this[ "dataSource_" + name ] = obj; this.notInitializedDataCount-=1; if ( 0==this.notInitializedDataCount) this.refresh(); };this.setTimerIcon = function ( enable ) {  var timerplace = document.getElementById("dialogv54b60ebaec3bd_timerplace"); var logo = document.getElementById("dialogv54b60ebaec3bd_logo"); var button = document.getElementById("dialogv54b60ebaec3bd_calculate"); if ( timerplace && logo && button) { timerplace.style.display=(enable?"inline-block":"none"); } this.enableOutputs(!enable);};this.enableOutputs = function( enable ) {this.Dialog.matrixR.GetElement().style.visibility=(enable?"visible":"hidden");this.Dialog.validation.GetElement().style.visibility=(enable?"visible":"hidden");};this.onkeypressed = function ( controlid, evt ) { return true;};this.refreshTimer= 0;this.onchanged = function ( controlid ) {var control  = this.Dialog[ controlid ];if ( control.ValidateCurrent() && this.Dialog.Validate() ) {  this.recalculate(1500);}};this.recalculate= function ( timeout ) {	this.changeDisplayOptions();if (this.progressControl.isInProgress()) { this.progressControl.stop(); return;}if (this.refreshTimer) { clearTimeout(this.refreshTimer); } dialoghandlerv54b60ebaec3bd.setTimerIcon(true); this.refreshTimer=setTimeout('dialoghandlerv54b60ebaec3bd.refresh()',timeout);if ( this.Dialog.matrixA ) { PSS.SaveInput("1207","matrixA", this.Dialog.matrixA);}if ( this.Dialog.matrixB ) { PSS.SaveInput("1207","matrixB", this.Dialog.matrixB);}if ( this.Dialog.messages ) { PSS.SaveInput("1207","messages", this.Dialog.messages);}};
function CalcProgressControl( calcHandler ) { var me=this;	var shouldContinue=false;	var shouldStop=false;	me.context = null;	me.isInProgress=function( ){ return me.context!=null;}
	function setButtonLabel( lbl ){ document.getElementById("dialogv54b60ebaec3bd_button_text").innerHTML=lbl; }this.stop=function(){};this.clear=function(){};this.repeat=function(){};this.shouldRepeat=function(){ return false;};};
this.progressControl = new CalcProgressControl( this );this.repeat = function() { this.refresh(true); }; this.refresh = function ( repeat ) {if ( !repeat ) { this.progressControl.context = null;}if ( this.notInitializedDataCount>0 ) return;clearTimeout(this.refreshTimer); this.refreshTimer=0;this.setTimerIcon(true);try {if ( !this.progressControl.context ) {}	this.changeDisplayOptions();this.calculate(this.Dialog.matrixA.GetValue(), this.Dialog.matrixB.GetValue(), this.Dialog.messages.GetValue(), this.Dialog.matrixR, this.Dialog.validation);} catch( e ) { 
if ( !this.showControlError( e )) {alert( e.message ); }}if ( this.progressControl.shouldRepeat() ) {	if (this.refreshTimer) { clearTimeout(this.refreshTimer); } this.refreshTimer=setTimeout('dialoghandlerv54b60ebaec3bd.repeat()',200);this.enableOutputs(true);} else {this.setTimerIcon(false);this.progressControl.clear(); }};this.changeDisplayOptions = function () {this.calculateDisplay(new function ( val ) {this.GetValue = function() { return val.GetValue();}
this.Display = function( y ) { if( y ) val.Show(); else val.Hide(); }
}(this.Dialog.matrixA), new function ( val ) {this.GetValue = function() { return val.GetValue();}
this.Display = function( y ) { if( y ) val.Show(); else val.Hide(); }
}(this.Dialog.matrixB), new function ( val ) {this.GetValue = function() { return val.GetValue();}
this.Display = function( y ) { if( y ) val.Show(); else val.Hide(); }
}(this.Dialog.messages), new function ( val ) {this.Display = function( y ) { if( y ) val.Show(); else val.Hide(); }
}(this.Dialog.matrixR), new function ( val ) {this.Display = function( y ) { if( y ) val.Show(); else val.Hide(); }
}(this.Dialog.validation));}
this.calculateDisplay = function ( matrixA, matrixB, messages, matrixR, validation )
 {};
this.calculate = function ( matrixA, matrixB, messages, matrixR, validation ) {function MatrixParser()
{
	this.c_valid = 0;
	this.c_invalid = -1;
	this.c_empty = -2;
	this.error_line = -1;

	this.validation_result = this.c_valid;

	this.rows = -1;
	this.columns = -1;
	this.matrix = [];
	
	this.parse = function(matrixstring)
	{		
		var rows = matrixstring.split(/\r\n|\r|\n/);
		for(var i = 0; i < rows.length; ++i)
		{
			if (rows[i].length == 0)
				continue;
			var cols = rows[i].split(" ");
			var nums = [];
			for(var j = 0; j < cols.length; ++j)
			{
				if (cols[j].length == 0)
					continue;
				var num = Number(cols[j].replace(',', '.'));
				if (isNaN(num))
				{
					this.error_line = i + 1;
					this.validation_result = this.c_invalid;
					break;					
				}
				nums.push(num);
			}

			if (this.columns == -1)
				this.columns = nums.length;
			else if (this.columns != nums.length)
			{
				this.error_line = i + 1;
				this.validation_result = this.c_invalid;
				break;
			}
			if (this.validation_result == this.c_invalid)
				break;
			if (nums.length == 0)
			{
				this.validation_result = this.c_empty;
				break;
			}	
			this.matrix.push(nums);
		}
		this.rows = this.matrix.length;
	}	
}

function MatrixSolver()
{
	function get(matrixarray, i, j)
	{
		var row = matrixarray[i];
		return row[j];
	}

	function columns(matrixarray)
	{
		var row = matrixarray[0];
		return row.length;
	}

	function rows(matrixarray)
	{
		return matrixarray.length;
	}

	function minor(matrixarray, i, j)
	{
		var m = [];
		for(var k = 0; k < matrixarray.length; ++k)
		{
			if (k == i)
				continue;
			var row = matrixarray[k];
			var newrow = [];
			for(var l = 0; l < row.length; ++l)
			{
				if (l == j)
					continue;
				newrow.push(row[l]);
			}
			m.push(newrow);
		}
		return m;
	}

	this.calcMultiplication = function(matrixA, matrixB)
	{
		var result = [];
		var columnsA = columns(matrixA);
		var rowsA = rows(matrixA);
		var columnsB = columns(matrixB);
		var rowsB = rows(matrixB);
		for (var i = 0; i < rowsA; ++i)
		{
			var newrow = [];
			for (var j = 0; j < columnsB; ++j)
			{		
				var value = 0;
				for (var k = 0; k < rowsB; ++k)
				{
					value += get(matrixA, i, k) * get(matrixB, k, j);
				}
				newrow.push(value);
			}
			result.push(newrow);
		}
		return result;
	}	

	this.calcTransponent = function(matrixarray)
	{
		var transponent = [];
		var cols = columns(matrixarray);
		for (var i = 0; i < cols; ++i)
		{
			var newrow = [];
			var rowscount = rows(matrixarray);
			for (var j = 0; j < rowscount; ++j)
			{
				newrow[newrow.length] = get(matrixarray, j, i);
			}
			transponent[transponent.length] = newrow;
		}
		return transponent;
	}	

	this.calcDeterminant = function(matrixarray)
	{
		if (matrixarray.length == 1)
			return get(matrixarray, 0, 0);
		else if (matrixarray.length == 2)
			return get(matrixarray, 0, 0) * get(matrixarray, 1, 1) - get(matrixarray, 0, 1) * get(matrixarray, 1, 0);
		else
		{
			var det = 0;
			var cols = columns(matrixarray);
			for (var i = 0; i < cols; ++i)
			{
				det += Math.pow(-1, i)*get(matrixarray, 0, i)*this.calcDeterminant(minor(matrixarray, 0, i));
			}
			return det;
		}
	}	
}

var parserA = new MatrixParser();
parserA.parse(matrixA);
if (parserA.validation_result == parserA.c_empty)
	validation.SetValue(messages["Zero"]);
else if (parserA.validation_result == parserA.c_invalid)
	validation.SetValue(messages["Error"] + " " + parserA.error_line);

var parserB = new MatrixParser();
parserB.parse(matrixB);
if (parserB.validation_result == parserB.c_empty)
	validation.SetValue(messages["Zero"]);
else if (parserB.validation_result == parserB.c_invalid)
	validation.SetValue(messages["Error"] + parserB.error_line);

if (parserA.validation_result == parserA.c_valid && parserB.validation_result == parserB.c_valid)
{
	if (parserA.columns != parserB.rows)
	{
		validation.SetValue(messages["NonFit"]);
		matrixR.SetValue([]);
	}
	else
	{
		validation.SetValue(messages["OK"]);
		var solver = new MatrixSolver();
		var multiplication = solver.calcMultiplication(parserA.matrix, parserB.matrix);
		matrixR.SetValue(multiplication);
	}
}
};};
dialoghandlerv54b60ebaec3bd.initdialog(dialogv54b60ebaec3bd);
</script>
</div>

</div>
</div>
</div>
<div class="horizontal_divider"></div>
</div>
	</div></div>
</body>
</html>